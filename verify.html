<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é©—è­‰é é¢ - Streamlitå®Œæ•´ç‰ˆæœ¬</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f0f2f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #d32f2f;
            text-align: center;
        }
        .status {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .status-item {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 5px;
            border-left: 4px solid #4CAF50;
        }
        .status-item.error {
            border-left-color: #f44336;
        }
        .button {
            display: inline-block;
            padding: 12px 24px;
            margin: 10px 5px;
            background: #1976d2;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
        }
        .button:hover {
            background: #1565c0;
        }
        .button.success {
            background: #4CAF50;
        }
        .button.success:hover {
            background: #45a049;
        }
        .code {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>âœ… Streamlitå®Œæ•´ç‰ˆæœ¬é©—è­‰</h1>
        
        <div class="status">
            <h3>ğŸ“Š æœå‹™ç‹€æ…‹</h3>
            
            <div class="status-item" id="health-status">
                <strong>å¥åº·æª¢æŸ¥:</strong> æ¸¬è©¦ä¸­...
            </div>
            
            <div class="status-item" id="api-status">
                <strong>APIé€£æ¥:</strong> æ¸¬è©¦ä¸­...
            </div>
            
            <div class="status-item" id="page-status">
                <strong>é é¢åŠ è¼‰:</strong> æ¸¬è©¦ä¸­...
            </div>
        </div>
        
        <h3>ğŸš€ è¨ªå•éˆæ¥</h3>
        <p>
            <a href="http://localhost:8502" class="button" target="_blank">æœ¬æ©Ÿè¨ªå•</a>
            <a href="http://192.168.128.62:8502" class="button success" target="_blank">å±€åŸŸç¶²è¨ªå•</a>
            <a href="http://localhost:9002/test_page.html" class="button" target="_blank">æ¸¬è©¦é é¢</a>
        </p>
        
        <h3>ğŸ“‹ å®Œæ•´ç‰ˆæœ¬åŠŸèƒ½</h3>
        <ul>
            <li><strong>çµ±è¨ˆæ‘˜è¦</strong> - æ•‘è­·ç«™å’Œæ¶ˆé˜²å±€æ•¸é‡çµ±è¨ˆ</li>
            <li><strong>åœ°å€åˆ†å¸ƒåœ–è¡¨</strong> - äº¤äº’å¼Plotlyåœ–è¡¨</li>
            <li><strong>ä½ç½®åˆ†å¸ƒåœ–</strong> - æœå‹™é»åœ°ç†åˆ†å¸ƒ</li>
            <li><strong>è©³ç´°æ•¸æ“šè¡¨æ ¼</strong> - æœç´¢ã€éæ¿¾ã€æ’åº</li>
            <li><strong>æ•¸æ“šå°å‡º</strong> - CSVæ ¼å¼ä¸‹è¼‰</li>
            <li><strong>åˆä½µåˆ†æ</strong> - æ‰€æœ‰æœå‹™é»çµ±è¨ˆ</li>
        </ul>
        
        <h3>ğŸ”§ æŠ€è¡“ä¿¡æ¯</h3>
        <div class="code">
# é‹è¡Œå‘½ä»¤
streamlit run app.py \
    --server.port 8502 \
    --server.address 0.0.0.0 \
    --server.headless true

# ä¾è³´åŒ…
streamlit==1.28.0
pandas==2.0.0
plotly==5.18.0
requests==2.31.0
        </div>
        
        <h3>ğŸ“± æ‰‹æ©Ÿè¨ªå•</h3>
        <p>åœ¨æ‰‹æ©Ÿç€è¦½å™¨è¼¸å…¥ï¼š</p>
        <div class="code">http://192.168.128.62:8502</div>
        
        <p style="text-align: center; color: #666; margin-top: 30px;">
            æœ€å¾Œæ›´æ–°: <span id="timestamp"></span>
        </p>
    </div>
    
    <script>
        // æ›´æ–°æ™‚é–“æˆ³
        document.getElementById('timestamp').textContent = new Date().toLocaleString('zh-HK');
        
        // æ¸¬è©¦å¥åº·ç‹€æ…‹
        fetch('http://localhost:8502/_stcore/health')
            .then(response => response.text())
            .then(data => {
                const element = document.getElementById('health-status');
                if (data === 'ok') {
                    element.innerHTML = '<strong>å¥åº·æª¢æŸ¥:</strong> âœ… æ­£å¸¸ (æœå‹™æ­£åœ¨é‹è¡Œ)';
                } else {
                    element.innerHTML = '<strong>å¥åº·æª¢æŸ¥:</strong> âŒ ç•°å¸¸ (å›æ‡‰: ' + data + ')';
                    element.className = 'status-item error';
                }
            })
            .catch(error => {
                document.getElementById('health-status').innerHTML = 
                    '<strong>å¥åº·æª¢æŸ¥:</strong> âŒ å¤±æ•— (éŒ¯èª¤: ' + error + ')';
                document.getElementById('health-status').className = 'status-item error';
            });
        
        // æ¸¬è©¦APIé€£æ¥
        fetch('https://portal.csdi.gov.hk/server/services/common/hkfsd_rcd_1634799003993_7633/MapServer/WFSServer?service=wfs&request=GetFeature&typenames=AmbDepots&outputFormat=geojson&count=1')
            .then(response => {
                const element = document.getElementById('api-status');
                if (response.ok) {
                    element.innerHTML = '<strong>APIé€£æ¥:</strong> âœ… æ­£å¸¸ (é¦™æ¸¯æ”¿åºœAPIå¯ç”¨)';
                } else {
                    element.innerHTML = '<strong>APIé€£æ¥:</strong> âŒ ç•°å¸¸ (ç‹€æ…‹ç¢¼: ' + response.status + ')';
                    element.className = 'status-item error';
                }
            })
            .catch(error => {
                document.getElementById('api-status').innerHTML = 
                    '<strong>APIé€£æ¥:</strong> âŒ å¤±æ•— (ç¶²çµ¡éŒ¯èª¤)';
                document.getElementById('api-status').className = 'status-item error';
            });
        
        // æ¸¬è©¦é é¢åŠ è¼‰
        fetch('http://localhost:8502')
            .then(response => {
                const element = document.getElementById('page-status');
                if (response.ok) {
                    element.innerHTML = '<strong>é é¢åŠ è¼‰:</strong> âœ… æ­£å¸¸ (ç‹€æ…‹ç¢¼: ' + response.status + ')';
                } else {
                    element.innerHTML = '<strong>é é¢åŠ è¼‰:</strong> âŒ ç•°å¸¸ (ç‹€æ…‹ç¢¼: ' + response.status + ')';
                    element.className = 'status-item error';
                }
            })
            .catch(error => {
                document.getElementById('page-status').innerHTML = 
                    '<strong>é é¢åŠ è¼‰:</strong> âŒ å¤±æ•— (ç„¡æ³•é€£æ¥)';
                document.getElementById('page-status').className = 'status-item error';
            });
    </script>
</body>
</html>